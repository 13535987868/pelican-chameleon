{% macro article_panel_list(parent='', id='', title_left='', title_right='', entry_list=[]) %}
  <div class="panel panel-primary">
    <div class="panel-heading ">
      {{- title_left -}}
      {% if title_right %}
        <a class="accordion-toggle" data-toggle="collapse" 
          {#data-parent="{{ parent }}"#}
          href="#{{ id }}">
          <span class="badge pull-right">
            {{- title_right -}}
          </span>
        </a>
      {% endif %}
    </div>

    <div class="panel-body hidden"></div>

    <ul class="list-group">
      <div class="panel-collapse collapse in" id="{{ id }}">
        {% for article in entry_list %}
        <a href="/{{ article.url }}">
          <li class="list-group-item">
            {{- article.title -}}
            <span class="pull-right">
            {{- article.locale_date -}}
            </span>
          </li>
        </a>
        {% endfor %}
      </div>
    </ul>

  </div>
{% endmacro %}

{% macro header(name, link) %}
  {% if name %}
    {% if link %}
    <div class="page-header">
      <h1><a href="{{ link }}">{{ name }}</a></h1>
    </div>
    {% endif %}
  {% else %}
    <p>&nbsp;</p>
  {% endif %}
{% endmacro%}

{% macro navbar(link) %}
  <nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <ul class="nav navbar-nav navbar-left">
          <li>
          <a class="navbar-brand" href="/">{{ SITENAME }}</a>
          </li>
        </ul>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav navbar-right">
          {% for title,url in MENUITEMS %}
            {% if url is string %}
              {% if title == 'Search' %}
                <li>
                  <form class="navbar-form navbar-right" role="search"
                    action="http://www.google.com/cse" 
                    id="searchbox_{{ url }}" target="_blank"> 
                    <div class="form-group">
                    <div class="input-group" style="width:200px">
                      <input type="hidden" name="cx" value="{{ url }}" /> 
                      <input type="text" name="q" class="form-control" placeholder="Search">
                      <span class="input-group-btn">
                        <button class="btn btn-primary"><span class="glyphicon glyphicon-search"></span></button>
                      </span>
                    </div>
                    </div>
                  </form>
                </li>

              {% else %}
              <li {% if url == link %}class="active"{% endif %}>
                  <a href="{{ url }}">{{ title }}</a>
                </li>
              {% endif %}

            {% elif url is iterable %}
              <li class="btn-group">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  {{- title }}<b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu">
                  {% for title,url in url %}
                  <li><a href="{{ url }}">{{ title }}</a></li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    </div><!-- /.navbar-collapse -->
  </nav>
{% endmacro %}

{% macro footer() %}
  <nav id="footer" class="navbar navbar-default">
    <div class="container">
        <p id="footer-text" class="navbar-text text-center">
          Powered by <a href="http://docs.getpelican.com">Pelican</a>,
          theme <a href="http://github.com/yuex/pelican-iliork">iliork</a>
          {%- if BS3_THEME_NAME %}
            built on <a href="http://getbootstrap.com">Bootstrap</a> and
            {%- if BS3_THEME_HOMEPAGE %} <a href="{{ BS3_THEME_HOMEPAGE }}"> {{ BS3_THEME_NAME }}</a>
            {%- else %} {{ BS3_THEME_NAME }}
            {%- endif -%}
          {%- endif -%}.
          Copyright Â© <a href="{{ AUTHORS[AUTHOR] }}">{{ AUTHOR }}</a>
        </p>
      </div>
    </div>
  </nav>
{% endmacro %}

{% macro pagination() %}
  {% if DEFAULT_PAGINATION %}
    <ul class="pagination">

      {% if articles_page.has_previous() %}
        <li>
          {% if articles_page.previous_page_number() == 1 %}
            <a href="/{{ page_name }}.html">&laquo;</a>
          {% else %}
            <a href="/{{ page_name }}{{ articles_page.previous_page_number() }}.html">&laquo;</a>
          {% endif %}
        </li>
      {% else %}
        <li class="disabled">
          <a>&laquo;</a>
        </li>
      {% endif %}

      {% for num in articles_paginator.page_range %}
      {% if articles_page.number != num %}
        <li>
          <a href="/{{page_name}}{% if num != 1 %}{{ num }}{% endif %}.html">
            {{- num }}<span class="sr-only">(current)</span></a>
        </li>
      {% else %}
        <li class="active">
          <a>{{- num }}<span class="sr-only">(current)</span></a>
        </li>
      {% endif %}
      {% endfor %}

      {% if articles_page.has_next() %}
        <li>
          <a href="/{{ page_name }}{{ articles_page.next_page_number() }}.html">&raquo;</a>
        </li>
      {% else %}
        <li class="disabled">
          <a>&raquo;</a>
        </li>
      {% endif %}

    </ul>
  {% endif %}
{% endmacro %}

{% macro article_info(article) %}
  <span id="article_info">
    <a class="label label-primary" 
      href="/category/{{ article.category }}.html">
      {{- article.category -}}
    </a>
    <b>|</b>
    {% for tag in article.tags %}
      <a class="label label-primary" 
        href="/tag/{{ tag }}.html">
        {{- tag -}}
      </a>
    {% endfor %}
    <span class="glyphicon glyphicon-calendar"></span>
      {{- article.locale_date -}}
    <span class="glyphicon glyphicon-user"></span>
    {% if AUTHORS[article.author] %}
      {% set author_url = AUTHORS[article.author] %}
    {% else %}
      {% set author_url = ["/author/",article.author,".html"]|join %}
    {% endif %}
    <a href="{{ author_url }}">{{ article.author }}</a>
  </span>
{% endmacro %}

{% macro taglist(prefix='',tags) %}
  {% for tag, articles in tags|sort %}
    <a class="label label-primary" 
      href="/{{prefix}}/{{tag}}.html">
      {{- tag }} {{ articles|count }}</a>
  {% endfor %}
{% endmacro %}
